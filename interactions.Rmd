---
title: "Twitter Network Visualizations"
author: "Niel Schrage"
date: "4/28/2020"
output: html_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)

# loading libraries I always use. 
library(tidyverse)
library(dplyr)
library(knitr)
library(styler)

# loading libraries for graphics/display
library(ggplot2)
library(ggthemes)
library(patchwork)

# loading libraries for Twitter research -- need authorization for this one...  
# from what I'm reading online, it seems like rtweet is better
library(twitteR)

# can I use this without a twitter account... apparently yes, well that gets rid of that problem...
# I might have spoken too soon here. looking at the lookup_friendship... need twitter authorization... oof... 
# consensus is better.. 

library(rtweet)

  # access to friends, followers, tweets, etcv

library(httr)

# oh geez this is going to be an adventure... 







# as my application is being reviewed, it is probably a good idea to start laying out what the code actually will look like so I can hit the ground running as soon as I get the green light.

# maybe do a dry run with my own twitter network data... just to see if it is doable. 

# concerned that the things I'm seeing online don't exactly align with what my initial project description was... do I need to keep digging, or should I be thinking about reframing my project. 
```

# Introduction

```{r setting up twitter api with rtweet, echo = FALSE}

# Huge assist from matthew... 

# whatever name you assigned to your created app
appname <- "com.mschrage.cs50.pset6"

## api key (example below is not a real key)
key <- "OmNp5994gPojHOzpeH6JuHCEh"

## api secret (example below is not a real key)
secret <- "UtB6CPYA8WnPpRtIo3S3w03DAXYqSOXVoMnVzJ9wMjHWiN2Nq0"

# create token named "twitter_token"
twitter_token <- create_token(
  app = appname,
  consumer_key = key,
  consumer_secret = secret) 

#,
  #access_token = "403220845-1fwgr3vsXuYqfObhMYyQuI1DCprcO3QypgfoKW5O",
  #access_secret = "LGftHBxuShElCTpjY4psbrMOG8zSv8HWbuaxhwTkKNfRG")

```

```{r test, echo = FALSE}



```


```{r loading twitter data, echo = FALSE, results = "asis"}

# setting up twitter authorization 
# need account to be approved before I can do this...

# loading twitter data
  # does norman yee not have a twitter... how to deal with that. that is actually crazy to me...
  # should I be looking at pre/post quarantine tweets... time frame? 

bos <- c("MattHaneySF", "AaronPeskin", "RafaelMandelman", "D4GordonMar", "DeanPreston", "SandraLeeFewer", "HillaryRonen", "Ahsha_Safai", "SupStefani", "shamannwalton", "NormanYeeSF", "LondonBreed")

board <- lookup_users(bos)

t <- lookup_tweets(statuses = "MattHaneySF", parse = TRUE, token = twitter_token)

Haney_Peskin <- lookup_friendships(source = "MattHaneySF", target = "AaronPeskin")

# You will not be able to collect any data until you have acquired API credentials.
  # how can I get around this... 

Haney2 <- lookup_tweets(statuses = "MattHaneySF", parse = TRUE, token = twitter_token)




# Need to be creative. Found package that gets 



```

```{r data collection/cleaning, echo=FALSE}

# data collection
SF <- get_timelines(c("MattHaneySF", "AaronPeskin", "RafaelMandelman", "D4GordonMar", "DeanPreston", "SandraLeeFewer", "HillaryRonen", "Ahsha_Safai", "SupStefani", "shamannwalton", "NormanYeeSF", "LondonBreed"), n = 3200)

# data cleaning
SF <- SF %>% 
  select(screen_name, text, mentions_screen_name, is_retweet, retweet_text, hashtags, reply_to_screen_name, created_at)



```


```{r network viz, echo=FALSE}
# adapted from:
# http://vosonlab.net/papers/SocialMediaLab/SocialMediaLab_package_tutorial.pdf

rt <- search_tweets(
  "#rstats", n = 18000, include_rts = FALSE
)

SF <- get_timelines(c("MattHaneySF", "AaronPeskin", "RafaelMandelman", "D4GordonMar", "DeanPreston", "SandraLeeFewer", "HillaryRonen", "Ahsha_Safai", "SupStefani", "shamannwalton", "NormanYeeSF", "LondonBreed"), n = 3200)

# need to get followers n, so I can scale graphics accordingly
#

mentions <- SF %>% 
  filter(mentions_screen_name %in% bos)


```


```{r data cleaning, echo = false}

```


```{r vizualizing_interations, echo = false, results = "asis"}

```

```{r vizualizing_retweets, echo = false, results = "asis"}

```